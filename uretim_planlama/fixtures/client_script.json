[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Stock Entry",
  "enabled": 1,
  "modified": "2025-11-16 17:55:38.760099",
  "module": "Uretim Planlama",
  "name": "Stock Entry-Material Request Filter Override",
  "script": "/**\n * Stock Entry - Material Request child item filtreleme desteği\n * ERPNext'in map_current_doc fonksiyonunu wrap eder ve \n * Material Request -> Stock Entry işlemlerinde custom metodumuzu kullanır\n * \n * @module uretim_planlama\n * @author Ozerpan ERP Team\n */\n\n// Global override sadece bir kez yap\nif (!window.__uretim_planlama_se_mr_override__) {\n    window.__uretim_planlama_se_mr_override__ = true;\n    \n    // Orijinal fonksiyonu sakla\n    const original_map_current_doc = erpnext.utils.map_current_doc;\n    \n    /**\n     * ERPNext'in map_current_doc fonksiyonunu wrap eder\n     * Sadece Material Request -> Stock Entry işlemlerini intercept eder\n     */\n    erpnext.utils.map_current_doc = function(opts) {\n        // Sadece Material Request -> Stock Entry işlemlerini intercept et\n        if (opts.method === \"erpnext.stock.doctype.material_request.material_request.make_stock_entry\") {\n            // Custom metodumuzu kullan (child item filtreleme desteği ile)\n            opts.method = \"uretim_planlama.stock_entry_material_request.make_stock_entry_with_filters\";\n            \n            // Child item filtreleme ayarlarını ekle (Purchase Order ile aynı format)\n            opts.allow_child_item_selection = true;\n            opts.child_fieldname = \"items\";\n            opts.child_columns = [\"item_code\", \"item_name\", \"item_group\", \"qty\", \"uom\"];\n        }\n        \n        // Orijinal fonksiyonu çağır\n        return original_map_current_doc.call(this, opts);\n    };\n}",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Order",
  "enabled": 1,
  "modified": "2025-11-16 17:56:02.102300",
  "module": "Uretim Planlama",
  "name": "Purchase Order-Material Request Filter Override",
  "script": "/**\n * Purchase Order - Material Request child item filtreleme desteği\n * ERPNext'in map_current_doc fonksiyonunu wrap eder ve \n * Material Request -> Purchase Order işlemlerinde custom metodumuzu kullanır\n * \n * @module uretim_planlama\n * @author Ozerpan ERP Team\n */\n\n// Global override sadece bir kez yap\nif (!window.__uretim_planlama_po_mr_override__) {\n    window.__uretim_planlama_po_mr_override__ = true;\n    \n    // Orijinal fonksiyonu sakla\n    const original_map_current_doc = erpnext.utils.map_current_doc;\n    \n    /**\n     * ERPNext'in map_current_doc fonksiyonunu wrap eder\n     * Sadece Material Request -> Purchase Order işlemlerini intercept eder\n     */\n    erpnext.utils.map_current_doc = function(opts) {\n        // Sadece Material Request -> Purchase Order işlemlerini intercept et\n        if (opts.method === \"erpnext.stock.doctype.material_request.material_request.make_purchase_order\") {\n            // Custom metodumuzu kullan (child item filtreleme desteği ile)\n            opts.method = \"uretim_planlama.purchase_order_material_request.make_purchase_order_with_filters\";\n            \n            // Child item filtreleme zaten var, sadece metodumuzu kullanmasını sağlıyoruz\n            // opts.allow_child_item_selection = true;  // Zaten var\n            // opts.child_fieldname = \"items\";  // Zaten var\n            // opts.child_columns = [\"item_code\", \"item_name\", \"qty\", \"ordered_qty\"];  // Zaten var\n        }\n        \n        // Orijinal fonksiyonu çağır\n        return original_map_current_doc.call(this, opts);\n    };\n}",
  "view": "Form"
 }
]