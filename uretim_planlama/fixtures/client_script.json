[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Global",
  "enabled": 1,
  "modified": "2025-09-18 12:53:05.484441",
  "module": "Uretim Planlama",
  "name": "Profile Quantity Calculator All Forms",
  "script": "// Global Profile Calculator Script V4 - Fonksiyonlar profile_calculator.js'de tanımlı\nconsole.log('Profile Calculator Global Script V4 - Client Script aktif');",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Delivery Note",
  "enabled": 1,
  "modified": "2025-09-18 14:14:48.140619",
  "module": "Uretim Planlama",
  "name": "Delivery Note Profile Handler",
  "script": "// Delivery Note Profile Calculator\nwindow.calculateProfileQty_DeliveryNote = function(frm, cdt, cdn) {\n    const row = locals[cdt][cdn];\n    \n    if (!row.custom_is_profile) {\n        frappe.msgprint('Önce \"Profil mi?\" alanını işaretleyin!');\n        return;\n    }\n    \n    if (!row.custom_profile_length_m || !row.custom_profile_length_qty) {\n        frappe.msgprint('Profil boyu ve adedi girilmelidir!');\n        return;\n    }\n    \n    frappe.call({\n        method: 'frappe.client.get_list',\n        args: {\n            doctype: 'Boy',\n            filters: {'name': row.custom_profile_length_m},\n            fields: ['name', 'length'],\n            limit: 1\n        },\n        callback: function(r) {\n            if (!r.message || r.message.length === 0) {\n                frappe.msgprint(`Boy kaydı bulunamadı: ${row.custom_profile_length_m}`);\n                return;\n            }\n            \n            const boy_data = r.message[0];\n            const length = parseFloat(boy_data.length.toString().replace(',', '.'));\n            const qty = parseInt(row.custom_profile_length_qty);\n            const cf = parseFloat(row.conversion_factor) || 1;\n            const calculatedQty = (length * qty) / cf;\n            \n            frappe.model.set_value(cdt, cdn, 'qty', calculatedQty).then(() => {\n                frappe.model.set_value(cdt, cdn, 'stock_qty', calculatedQty * cf);\n                frappe.show_alert(`Hesaplandı: ${length}m × ${qty} = ${calculatedQty.toFixed(2)}`);\n                frm.refresh_field('items');\n            });\n        }\n    });\n};\n\nwindow.styleProfileButtons_DeliveryNote = function() {\n    setTimeout(() => {\n        $('button[data-fieldname=\"custom_calculate_profile_qty\"]').css({\n            'background-color': '#dc3545',\n            'color': 'white'\n        });\n    }, 500);\n};\n\nfrappe.ui.form.on('Delivery Note Item', {\n    custom_calculate_profile_qty: (frm, cdt, cdn) => window.calculateProfileQty_DeliveryNote(frm, cdt, cdn)\n});\n\nfrappe.ui.form.on('Delivery Note', {\n    refresh: (frm) => window.styleProfileButtons_DeliveryNote()\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Sales Invoice",
  "enabled": 1,
  "modified": "2025-09-18 14:14:48.155419",
  "module": "Uretim Planlama",
  "name": "Sales Invoice Profile Handler",
  "script": "// Sales Invoice Profile Calculator\nwindow.calculateProfileQty_SalesInvoice = function(frm, cdt, cdn) {\n    const row = locals[cdt][cdn];\n    \n    if (!row.custom_is_profile) {\n        frappe.msgprint('Önce \"Profil mi?\" alanını işaretleyin!');\n        return;\n    }\n    \n    if (!row.custom_profile_length_m || !row.custom_profile_length_qty) {\n        frappe.msgprint('Profil boyu ve adedi girilmelidir!');\n        return;\n    }\n    \n    frappe.call({\n        method: 'frappe.client.get_list',\n        args: {\n            doctype: 'Boy',\n            filters: {'name': row.custom_profile_length_m},\n            fields: ['name', 'length'],\n            limit: 1\n        },\n        callback: function(r) {\n            if (!r.message || r.message.length === 0) {\n                frappe.msgprint(`Boy kaydı bulunamadı: ${row.custom_profile_length_m}`);\n                return;\n            }\n            \n            const boy_data = r.message[0];\n            const length = parseFloat(boy_data.length.toString().replace(',', '.'));\n            const qty = parseInt(row.custom_profile_length_qty);\n            const cf = parseFloat(row.conversion_factor) || 1;\n            const calculatedQty = (length * qty) / cf;\n            \n            frappe.model.set_value(cdt, cdn, 'qty', calculatedQty).then(() => {\n                frappe.model.set_value(cdt, cdn, 'stock_qty', calculatedQty * cf);\n                frappe.show_alert(`Hesaplandı: ${length}m × ${qty} = ${calculatedQty.toFixed(2)}`);\n                frm.refresh_field('items');\n            });\n        }\n    });\n};\n\nwindow.styleProfileButtons_SalesInvoice = function() {\n    setTimeout(() => {\n        $('button[data-fieldname=\"custom_calculate_profile_qty\"]').css({\n            'background-color': '#dc3545',\n            'color': 'white'\n        });\n    }, 500);\n};\n\nfrappe.ui.form.on('Sales Invoice Item', {\n    custom_calculate_profile_qty: (frm, cdt, cdn) => window.calculateProfileQty_SalesInvoice(frm, cdt, cdn)\n});\n\nfrappe.ui.form.on('Sales Invoice', {\n    refresh: (frm) => window.styleProfileButtons_SalesInvoice()\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Invoice",
  "enabled": 1,
  "modified": "2025-09-18 14:14:48.157260",
  "module": "Uretim Planlama",
  "name": "Purchase Invoice Profile Handler",
  "script": "// Purchase Invoice Profile Calculator\nwindow.calculateProfileQty_PurchaseInvoice = function(frm, cdt, cdn) {\n    const row = locals[cdt][cdn];\n    \n    if (!row.custom_is_profile) {\n        frappe.msgprint('Önce \"Profil mi?\" alanını işaretleyin!');\n        return;\n    }\n    \n    if (!row.custom_profile_length_m || !row.custom_profile_length_qty) {\n        frappe.msgprint('Profil boyu ve adedi girilmelidir!');\n        return;\n    }\n    \n    frappe.call({\n        method: 'frappe.client.get_list',\n        args: {\n            doctype: 'Boy',\n            filters: {'name': row.custom_profile_length_m},\n            fields: ['name', 'length'],\n            limit: 1\n        },\n        callback: function(r) {\n            if (!r.message || r.message.length === 0) {\n                frappe.msgprint(`Boy kaydı bulunamadı: ${row.custom_profile_length_m}`);\n                return;\n            }\n            \n            const boy_data = r.message[0];\n            const length = parseFloat(boy_data.length.toString().replace(',', '.'));\n            const qty = parseInt(row.custom_profile_length_qty);\n            const cf = parseFloat(row.conversion_factor) || 1;\n            const calculatedQty = (length * qty) / cf;\n            \n            frappe.model.set_value(cdt, cdn, 'qty', calculatedQty).then(() => {\n                frappe.model.set_value(cdt, cdn, 'stock_qty', calculatedQty * cf);\n                frappe.show_alert(`Hesaplandı: ${length}m × ${qty} = ${calculatedQty.toFixed(2)}`);\n                frm.refresh_field('items');\n            });\n        }\n    });\n};\n\nwindow.styleProfileButtons_PurchaseInvoice = function() {\n    setTimeout(() => {\n        $('button[data-fieldname=\"custom_calculate_profile_qty\"]').css({\n            'background-color': '#dc3545',\n            'color': 'white'\n        });\n    }, 500);\n};\n\nfrappe.ui.form.on('Purchase Invoice Item', {\n    custom_calculate_profile_qty: (frm, cdt, cdn) => window.calculateProfileQty_PurchaseInvoice(frm, cdt, cdn)\n});\n\nfrappe.ui.form.on('Purchase Invoice', {\n    refresh: (frm) => window.styleProfileButtons_PurchaseInvoice()\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Stock Entry",
  "enabled": 1,
  "modified": "2025-09-18 14:14:48.159074",
  "module": "Uretim Planlama",
  "name": "Stock Entry Profile Handler",
  "script": "// Stock Entry Profile Calculator\nwindow.calculateProfileQty_StockEntry = function(frm, cdt, cdn) {\n    const row = locals[cdt][cdn];\n    \n    if (!row.custom_is_profile) {\n        frappe.msgprint('Önce \"Profil mi?\" alanını işaretleyin!');\n        return;\n    }\n    \n    if (!row.custom_profile_length_m || !row.custom_profile_length_qty) {\n        frappe.msgprint('Profil boyu ve adedi girilmelidir!');\n        return;\n    }\n    \n    frappe.call({\n        method: 'frappe.client.get_list',\n        args: {\n            doctype: 'Boy',\n            filters: {'name': row.custom_profile_length_m},\n            fields: ['name', 'length'],\n            limit: 1\n        },\n        callback: function(r) {\n            if (!r.message || r.message.length === 0) {\n                frappe.msgprint(`Boy kaydı bulunamadı: ${row.custom_profile_length_m}`);\n                return;\n            }\n            \n            const boy_data = r.message[0];\n            const length = parseFloat(boy_data.length.toString().replace(',', '.'));\n            const qty = parseInt(row.custom_profile_length_qty);\n            const cf = parseFloat(row.conversion_factor) || 1;\n            const calculatedQty = (length * qty) / cf;\n            \n            frappe.model.set_value(cdt, cdn, 'qty', calculatedQty).then(() => {\n                frappe.model.set_value(cdt, cdn, 'stock_qty', calculatedQty * cf);\n                frappe.show_alert(`Hesaplandı: ${length}m × ${qty} = ${calculatedQty.toFixed(2)}`);\n                frm.refresh_field('items');\n            });\n        }\n    });\n};\n\nwindow.styleProfileButtons_StockEntry = function() {\n    setTimeout(() => {\n        $('button[data-fieldname=\"custom_calculate_profile_qty\"]').css({\n            'background-color': '#dc3545',\n            'color': 'white'\n        });\n    }, 500);\n};\n\nfrappe.ui.form.on('Stock Entry Detail', {\n    custom_calculate_profile_qty: (frm, cdt, cdn) => window.calculateProfileQty_StockEntry(frm, cdt, cdn)\n});\n\nfrappe.ui.form.on('Stock Entry', {\n    refresh: (frm) => window.styleProfileButtons_StockEntry()\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Material Request",
  "enabled": 1,
  "modified": "2025-09-18 14:14:48.160367",
  "module": "Uretim Planlama",
  "name": "Material Request Profile Handler",
  "script": "// Material Request Profile Calculator\nwindow.calculateProfileQty_MaterialRequest = function(frm, cdt, cdn) {\n    const row = locals[cdt][cdn];\n    \n    if (!row.custom_is_profile) {\n        frappe.msgprint('Önce \"Profil mi?\" alanını işaretleyin!');\n        return;\n    }\n    \n    if (!row.custom_profile_length_m || !row.custom_profile_length_qty) {\n        frappe.msgprint('Profil boyu ve adedi girilmelidir!');\n        return;\n    }\n    \n    frappe.call({\n        method: 'frappe.client.get_list',\n        args: {\n            doctype: 'Boy',\n            filters: {'name': row.custom_profile_length_m},\n            fields: ['name', 'length'],\n            limit: 1\n        },\n        callback: function(r) {\n            if (!r.message || r.message.length === 0) {\n                frappe.msgprint(`Boy kaydı bulunamadı: ${row.custom_profile_length_m}`);\n                return;\n            }\n            \n            const boy_data = r.message[0];\n            const length = parseFloat(boy_data.length.toString().replace(',', '.'));\n            const qty = parseInt(row.custom_profile_length_qty);\n            const cf = parseFloat(row.conversion_factor) || 1;\n            const calculatedQty = (length * qty) / cf;\n            \n            frappe.model.set_value(cdt, cdn, 'qty', calculatedQty).then(() => {\n                frappe.model.set_value(cdt, cdn, 'stock_qty', calculatedQty * cf);\n                frappe.show_alert(`Hesaplandı: ${length}m × ${qty} = ${calculatedQty.toFixed(2)}`);\n                frm.refresh_field('items');\n            });\n        }\n    });\n};\n\nwindow.styleProfileButtons_MaterialRequest = function() {\n    setTimeout(() => {\n        $('button[data-fieldname=\"custom_calculate_profile_qty\"]').css({\n            'background-color': '#dc3545',\n            'color': 'white'\n        });\n    }, 500);\n};\n\nfrappe.ui.form.on('Material Request Item', {\n    custom_calculate_profile_qty: (frm, cdt, cdn) => window.calculateProfileQty_MaterialRequest(frm, cdt, cdn)\n});\n\nfrappe.ui.form.on('Material Request', {\n    refresh: (frm) => window.styleProfileButtons_MaterialRequest()\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Sales Order",
  "enabled": 1,
  "modified": "2025-09-18 14:14:48.161695",
  "module": "Uretim Planlama",
  "name": "Sales Order Profile Handler",
  "script": "// Sales Order Profile Calculator\nwindow.calculateProfileQty_SalesOrder = function(frm, cdt, cdn) {\n    const row = locals[cdt][cdn];\n    \n    if (!row.custom_is_profile) {\n        frappe.msgprint('Önce \"Profil mi?\" alanını işaretleyin!');\n        return;\n    }\n    \n    if (!row.custom_profile_length_m || !row.custom_profile_length_qty) {\n        frappe.msgprint('Profil boyu ve adedi girilmelidir!');\n        return;\n    }\n    \n    frappe.call({\n        method: 'frappe.client.get_list',\n        args: {\n            doctype: 'Boy',\n            filters: {'name': row.custom_profile_length_m},\n            fields: ['name', 'length'],\n            limit: 1\n        },\n        callback: function(r) {\n            if (!r.message || r.message.length === 0) {\n                frappe.msgprint(`Boy kaydı bulunamadı: ${row.custom_profile_length_m}`);\n                return;\n            }\n            \n            const boy_data = r.message[0];\n            const length = parseFloat(boy_data.length.toString().replace(',', '.'));\n            const qty = parseInt(row.custom_profile_length_qty);\n            const cf = parseFloat(row.conversion_factor) || 1;\n            const calculatedQty = (length * qty) / cf;\n            \n            frappe.model.set_value(cdt, cdn, 'qty', calculatedQty).then(() => {\n                frappe.model.set_value(cdt, cdn, 'stock_qty', calculatedQty * cf);\n                frappe.show_alert(`Hesaplandı: ${length}m × ${qty} = ${calculatedQty.toFixed(2)}`);\n                frm.refresh_field('items');\n            });\n        }\n    });\n};\n\nwindow.styleProfileButtons_SalesOrder = function() {\n    setTimeout(() => {\n        $('button[data-fieldname=\"custom_calculate_profile_qty\"]').css({\n            'background-color': '#dc3545',\n            'color': 'white'\n        });\n    }, 500);\n};\n\nfrappe.ui.form.on('Sales Order Item', {\n    custom_calculate_profile_qty: (frm, cdt, cdn) => window.calculateProfileQty_SalesOrder(frm, cdt, cdn)\n});\n\nfrappe.ui.form.on('Sales Order', {\n    refresh: (frm) => window.styleProfileButtons_SalesOrder()\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Order",
  "enabled": 1,
  "modified": "2025-09-18 14:14:48.163317",
  "module": "Uretim Planlama",
  "name": "Purchase Order Profile Handler",
  "script": "// Purchase Order Profile Calculator\nwindow.calculateProfileQty_PurchaseOrder = function(frm, cdt, cdn) {\n    const row = locals[cdt][cdn];\n    \n    if (!row.custom_is_profile) {\n        frappe.msgprint('Önce \"Profil mi?\" alanını işaretleyin!');\n        return;\n    }\n    \n    if (!row.custom_profile_length_m || !row.custom_profile_length_qty) {\n        frappe.msgprint('Profil boyu ve adedi girilmelidir!');\n        return;\n    }\n    \n    frappe.call({\n        method: 'frappe.client.get_list',\n        args: {\n            doctype: 'Boy',\n            filters: {'name': row.custom_profile_length_m},\n            fields: ['name', 'length'],\n            limit: 1\n        },\n        callback: function(r) {\n            if (!r.message || r.message.length === 0) {\n                frappe.msgprint(`Boy kaydı bulunamadı: ${row.custom_profile_length_m}`);\n                return;\n            }\n            \n            const boy_data = r.message[0];\n            const length = parseFloat(boy_data.length.toString().replace(',', '.'));\n            const qty = parseInt(row.custom_profile_length_qty);\n            const cf = parseFloat(row.conversion_factor) || 1;\n            const calculatedQty = (length * qty) / cf;\n            \n            frappe.model.set_value(cdt, cdn, 'qty', calculatedQty).then(() => {\n                frappe.model.set_value(cdt, cdn, 'stock_qty', calculatedQty * cf);\n                frappe.show_alert(`Hesaplandı: ${length}m × ${qty} = ${calculatedQty.toFixed(2)}`);\n                frm.refresh_field('items');\n            });\n        }\n    });\n};\n\nwindow.styleProfileButtons_PurchaseOrder = function() {\n    setTimeout(() => {\n        $('button[data-fieldname=\"custom_calculate_profile_qty\"]').css({\n            'background-color': '#dc3545',\n            'color': 'white'\n        });\n    }, 500);\n};\n\nfrappe.ui.form.on('Purchase Order Item', {\n    custom_calculate_profile_qty: (frm, cdt, cdn) => window.calculateProfileQty_PurchaseOrder(frm, cdt, cdn)\n});\n\nfrappe.ui.form.on('Purchase Order', {\n    refresh: (frm) => window.styleProfileButtons_PurchaseOrder()\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Receipt",
  "enabled": 1,
  "modified": "2025-09-18 14:06:58.101304",
  "module": "Uretim Planlama",
  "name": "Purchase Receipt Profile Handler",
  "script": "function calculateProfileQty(frm, cdt, cdn) {\n    const row = locals[cdt][cdn];\n    \n    if (!row.custom_is_profile) {\n        frappe.msgprint('Önce \"Profil mi?\" alanını işaretleyin!');\n        return;\n    }\n    \n    if (!row.custom_profile_length_m || !row.custom_profile_length_qty) {\n        frappe.msgprint('Profil boyu ve adedi girilmelidir!');\n        return;\n    }\n    \n    frappe.call({\n        method: 'frappe.client.get_list',\n        args: {\n            doctype: 'Boy',\n            filters: {'name': row.custom_profile_length_m},\n            fields: ['name', 'length'],\n            limit: 1\n        },\n        callback: function(r) {\n            if (!r.message || r.message.length === 0) {\n                frappe.msgprint(`Boy kaydı bulunamadı: ${row.custom_profile_length_m}`);\n                return;\n            }\n            \n            const boy_data = r.message[0];\n            const length = parseFloat(boy_data.length.toString().replace(',', '.'));\n            const qty = parseInt(row.custom_profile_length_qty);\n            const cf = parseFloat(row.conversion_factor) || 1;\n            const calculatedQty = (length * qty) / cf;\n            \n            frappe.model.set_value(cdt, cdn, 'qty', calculatedQty).then(() => {\n                frappe.model.set_value(cdt, cdn, 'stock_qty', calculatedQty * cf);\n                frappe.show_alert(`Hesaplandı: ${length}m × ${qty} = ${calculatedQty.toFixed(2)}`);\n                frm.refresh_field('items');\n            });\n        }\n    });\n}\n\nfunction styleProfileButtons() {\n    setTimeout(() => {\n        $('button[data-fieldname=\"custom_calculate_profile_qty\"]').css({\n            'background-color': '#dc3545',\n            'color': 'white'\n        });\n    }, 500);\n}\n\nfrappe.ui.form.on('Purchase Receipt Item', {\n    custom_calculate_profile_qty: (frm, cdt, cdn) => calculateProfileQty(frm, cdt, cdn)\n});\n\nfrappe.ui.form.on('Purchase Receipt', {\n    refresh: (frm) => styleProfileButtons()\n});",
  "view": "Form"
 }
]